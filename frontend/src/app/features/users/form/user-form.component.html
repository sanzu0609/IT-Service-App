<section class="mx-auto flex w-full max-w-3xl flex-col gap-4 rounded-lg border border-slate-200 bg-white p-6 shadow-sm">
  <header class="flex items-center justify-between">
    <div>
      <h1 class="text-xl font-semibold text-slate-900">{{ title }}</h1>
      <p class="text-sm text-slate-600">Manage user account information.</p>
    </div>
    <a class="text-sm text-blue-600 hover:underline" [routerLink]="['/admin/users']">Back to list</a>
  </header>

  <form (ngSubmit)="submit()" [formGroup]="form" class="space-y-4">
    <div class="grid gap-3 md:grid-cols-2">
      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-500">Username</label>
        <input
          class="rounded border border-slate-300 px-3 py-2"
          placeholder="Username"
          formControlName="username"
          [readonly]="isEdit"
        />
        <p class="text-xs text-red-600" *ngIf="form.controls.username.invalid && !isEdit && form.controls.username.touched">
          Username is required.
        </p>
      </div>

      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-500">Email</label>
        <input class="rounded border border-slate-300 px-3 py-2" placeholder="Email" formControlName="email" />
        <p class="text-xs text-red-600" *ngIf="form.controls.email.invalid && form.controls.email.touched">
          Provide a valid email.
        </p>
      </div>

      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-500">Full name</label>
        <input class="rounded border border-slate-300 px-3 py-2" placeholder="Full name" formControlName="fullName" />
      </div>

      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-500">Role</label>
        <select class="rounded border border-slate-300 px-3 py-2" formControlName="role">
          <option *ngFor="let role of roles" [ngValue]="role">{{ role }}</option>
        </select>
      </div>

      <div class="flex flex-col gap-1">
        <label class="text-xs font-semibold uppercase tracking-wide text-slate-500">Department ID</label>
        <input
          class="rounded border border-slate-300 px-3 py-2"
          placeholder="Department ID"
          formControlName="departmentId"
          type="number"
        />
      </div>

      <div class="flex items-center gap-2">
        <input id="active" type="checkbox" formControlName="active" class="h-4 w-4" />
        <label class="text-sm text-slate-700" for="active">Active</label>
      </div>
    </div>

    <div *ngIf="error()" class="rounded border border-red-200 bg-red-50 px-4 py-2 text-sm text-red-700">
      {{ error() }}
    </div>

    <div class="flex items-center gap-3">
      <button
        class="rounded bg-emerald-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-emerald-500 disabled:opacity-50"
        type="submit"
        [disabled]="saving()"
      >
        {{ saving() ? 'Saving…' : 'Save' }}
      </button>
      <a
        class="rounded border border-slate-300 px-4 py-2 text-sm text-slate-600 transition hover:bg-slate-100"
        [routerLink]="['/admin/users']"
      >
        Cancel
      </a>
    </div>
  </form>

  <div *ngIf="loading()" class="text-sm text-slate-500">Loading user details…</div>
</section>
